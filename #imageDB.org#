#+STARTUP: showall hidestars indent


~/Documents/Lab-All/Lab-Projects/GIT/track-image-experiments

* Todo
- work out bugs in compiling model
- finish building out choice values and enter existing examples
- work out probe times table

* Running
cd ~/Documents/Lab-All/Lab-Projects/GIT/track-image-experiments
source .venv/bin/activate
** run webserver
cd main
python manage.py runserver

** run python
cd main
python manage.py shell

import os, json
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'mysite.settings')
import django
djagno.setup()
from django.db import models
from core.models import *

* Setup
** python virtual environment
python3 -m venv .venv
source .venv/bin/activate
pip install django

** create project "main"
django-admin startproject main
python manage.py migrate

** create app for database models
python manage.py startapp core

** update database schema (first compile when implement)
python manage.py makemigrations core
python manage.py migrate

- show the sql
python manage.py sqlmigrate core 0001

** run python shell
python manage.py shell

** create user accounts
python manage.py createsuperuser
(admin / password)

*** reset admin password
$ python manage.py shplayell
>>> from django.contrib.auth.models import User
>>> user = User.objects.get(username='admin')
>>> user.set_password('password')
>>> user.save()


* Model
https://docs.google.com/spreadsheets/d/1W-49KYT5_sEUBDgrxPGcbRqh6B6I0XojIRVaDbURsnY/edit?gid=0#gid=0

** output sql schema
https://app.chartdb.io/diagrams/uknukg77v3ns
- can use beekeeper GUI to run the required SQL

** Slide Metadata:
captures specimen level metadata, along with staining prep and assay. Slide ID is generated by user
** Probe Metadata:
captures metadata centered around the FISH probe or antibody used in the assay. The ProbeID is automatically generated based on technology, target, and fluorophore. The Panels column is defined in the Panels Metadata tab.  ProbesIDs can be used by multiple PanelIDs and vice-versa.
** Panels Metadata:
attempts to capture the combination of probes and antibodies that make up an assay. The PanelID is defined here. The rest of the fields are automatically populated by the ProbeIDs the user associated with each PanelID. The Concatenated list of probes column provides a semi-colon separated list of all the ProdeIDs in the panel.
** Imaging parameters:
somewhat redundant with the Probe Metadata field. However, different Slides could have different exposure time or success with the same probe, so this tab tries to capture slide x probe interactions.


* Use singleton model for globals
https://globaldev.tech/blog/practical-application-singleton-design-pattern
https://github.com/steelkiwi/django-singleton-tutorial

https://dev.to/sirneij/making-django-global-settings-dynamic-the-singleton-design-pattern-25en
https://django-constance.readthedocs.io/en/stable/


